## This is the main factory template
## It contains all the static code for the to-be-generated Factory
## The dynamic contents is filled from the corresponding ParsedClass object

/**
* This is auto generated class by the Apache velocity template engine
* The corresponding template is FactoryTemplate.vm
**/
package $parsedClass.getPackageName();

import java.math.BigInteger;
import tom.library.enumerator.Combinators;
import tom.library.enumerator.Enumeration;
import tom.library.enumerator.F;
import tom.library.enumerator.Finite;
import tom.library.enumerator.LazyList;
import tom.library.enumerator.P1;
import $parsedClass.getCanonicalName();

public class $parsedClass.getFactoryClassName() {

    private static Enumeration<$parsedClass.getSimpleName()> finalEnum = null;
    
    public static final Enumeration<$parsedClass.getSimpleName()>  getEnumeration() {
        
#if ($parsedClass.hasNoArgsConstructor())
        Enumeration<$parsedClass.getSimpleName()> $parsedClass.getNoArgsConstructor().getEnumName() = Enumeration.singleton(new $parsedClass.getSimpleName()());
#end
        
#foreach($cons in $parsedClass.getConstructors())
        final $cons.getCurriedType(0) $cons.getVariableName() = new $cons.getCurriedType(0)() {
            $cons.getCurriedDefinition(0)
        };
        
#foreach($param in $cons.getParameters())
        $param.enumDeclare() = $param.enumCreate();
#end
        
        Enumeration<$parsedClass.getSimpleName()> $cons.getEnumName() = $cons.getEnumerationConstruction();
#end
//////////////// generating methods ////////////////

        Enumeration<$parsedClass.getSimpleName()> tmpThisEnum = new Enumeration<$parsedClass.getSimpleName()>((LazyList<Finite<$parsedClass.getSimpleName()>>) null);

#foreach($method in $parsedClass.getMethods())
        final $method.getCurriedType(-1) $method.getVariableName() = new $method.getCurriedType(-1)() {
            $method.getCurriedDefinition(-1)
        };
        
#foreach($param in $method.getParameters())
        $param.enumDeclare() = $param.enumCreate();
#end
        
        Enumeration<$parsedClass.getSimpleName()> $method.getEnumName() = $method.getEnumerationConstruction();
        
#end
        tmpThisEnum.p1 = new P1<LazyList<Finite<$parsedClass.getSimpleName()>>>() {
            public LazyList<Finite<$parsedClass.getSimpleName()>> _1() {
                return finalEnum.parts();
            }
        };
////////////////////////////////////////////////////
        
        finalEnum = $parsedClass.getFinalEnum();
        
        return finalEnum;
        
    }

}