<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.06">
<TITLE>
 Installing and using the system
</TITLE>
</HEAD>
<BODY TEXT=black BGCOLOR=white>
<A HREF="manual1001.html"><IMG SRC ="previous_motif.gif" ALT="Previous"></A>
<A HREF="manual.html"><IMG SRC ="contents_motif.gif" ALT="Up"></A>
<A HREF="system.html"><IMG SRC ="next_motif.gif" ALT="Next"></A>
<HR>
<TABLE CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#0f75ff"><DIV ALIGN=center><TABLE>
<TR><TD><A NAME="htoc2"><B><FONT SIZE=6>Chapter&nbsp;1</FONT></B></A></TD>
<TD WIDTH="100%" ALIGN=center><B><FONT SIZE=6>Installing and using the system</FONT></B></TD>
</TR></TABLE></DIV></TD>
</TR></TABLE>

This part of the manual gives basic information to get and install the
system.<BR>
<BR>
<A NAME="toc1"></A><TABLE CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#007fff"><DIV ALIGN=center><TABLE>
<TR><TD><A NAME="htoc3"><B><FONT SIZE=5>1.1</FONT></B></A></TD>
<TD WIDTH="100%" ALIGN=center><B><FONT SIZE=5>Requirements and download</FONT></B></TD>
</TR></TABLE></DIV></TD>
</TR></TABLE>
The current version of <FONT COLOR=navy>Tom</FONT> is available at <A HREF="http://www.loria.fr/equipes/protheo/SOFTWARES/ELAN/tom/">TOM Home Page</A>.
In this page, you will find the latest release of <FONT COLOR=navy>Tom</FONT>.
<BR>
There are 2 kinds of packages:
<UL><LI>
<FONT COLOR=navy>Tom</FONT> software package;
<LI>A bundle package with <FONT COLOR=navy>Tom</FONT> software itself and all dependencies
 packages;
</UL>

<H5>Compiling and runtime tools</H5>
<FONT COLOR=navy>Tom</FONT> is written in Java and <FONT COLOR=navy>Tom</FONT> itself. You will need a Java
compiler and interpreter to compile and run <FONT COLOR=navy>Tom</FONT>. 
<BR>
We actually use Sun JDK 1.3.1 and 1.4 tools for development and runtime
excecution.
<BR>
Some tests have already been realized with gcj
and Jikes without any particular issues.<BR>
<BR>

<H5>Package dependencies</H5>
<FONT COLOR=navy>Tom</FONT> software depends on others packages:
<UL><LI>
shared-objects
<LI>JJTraveler
<LI>aterm-java
</UL>
The following image shows the dependencies order:<BR>
<BR>
<IMG SRC="depgraphjtom.pgn"><BR>
<BR>
Such packages are available at:
<UL><LI>
<A HREF="http://www.loria.fr/equipes/protheo/SOFTWARES/ELAN/tom/"><FONT COLOR=navy>Tom</FONT> Home Page</A>
<LI><A HREF="http://www.cwi.nl/htbin/sen1/twiki/bin/view/SEN1/PackageBase">CWI package base Page</A>
</UL> 
<A NAME="toc2"></A><TABLE CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#007fff"><DIV ALIGN=center><TABLE>
<TR><TD><A NAME="htoc4"><B><FONT SIZE=5>1.2</FONT></B></A></TD>
<TD WIDTH="100%" ALIGN=center><B><FONT SIZE=5>Installation</FONT></B></TD>
</TR></TABLE></DIV></TD>
</TR></TABLE>
Depending on the<FONT COLOR=navy>Tom</FONT> package you download, here is the installation
instructions.<BR>
<BR>
<TABLE CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#0000ff"><DIV ALIGN=center><TABLE>
<TR><TD><B><FONT SIZE=4>1.2.1</FONT></B></TD>
<TD WIDTH="100%" ALIGN=center><B><FONT SIZE=4>Installing the bundle package</FONT></B></TD>
</TR></TABLE></DIV></TD>
</TR></TABLE>
This is the simplest way to have quickly <FONT COLOR=navy>Tom</FONT> running on your
computer.
<UL><LI>
Untar the package: 
 &gt; tar xzf jtom-bundle-VERSION.tar.gz
<LI>Download and unpack the required packages:<BR>
&gt; ./collect.sh
<LI>Configure, build and install:<BR>
&gt; ./configure --help gives a complete list of available configuration parameters.<BR>
&gt; ./configure &lt;&lt;configuration parameters&gt;&gt;<BR>
&gt; gmake
</UL>
Once all is done, you are ready using <FONT COLOR=navy>Tom</FONT> using jtom command.<BR>
<BR>
<TABLE CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#0000ff"><DIV ALIGN=center><TABLE>
<TR><TD><B><FONT SIZE=4>1.2.2</FONT></B></TD>
<TD WIDTH="100%" ALIGN=center><B><FONT SIZE=4>Installing <FONT COLOR=navy>Tom</FONT></FONT></B><B><FONT SIZE=4> package</FONT></B></TD>
</TR></TABLE></DIV></TD>
</TR></TABLE><BR>

<H5>Installation process</H5>
<OL type=1><LI>
Get and install the shared-objects package<BR>
a. Type `./configure --prefix=&lt;SHARED-DIR&gt;'<BR>
b. Type `make'<BR>
c. Type `make install'
<LI>Get and install the JJTraveler package<BR>
a. Type `./configure --prefix=&lt;JJT-DIR&gt;'<BR>
b. Type `make'<BR>
c. Type `make install'
<LI>Get and install the aterm-java package<BR>
a. Type `./configure --prefix=&lt;ATERM-DIR&gt;
--with-JJTraveler=&lt;JJT-DIR&gt; --with-shared-objects=&lt;SHARED-DIR&gt;'<BR>
b. Type `make'<BR>
c. Type `make install'<BR>
<BR>
<LI>Configure and install <FONT COLOR=navy>Tom</FONT> package:<BR>
a./configure --prefix=&lt;INSTALLDIR&gt;
--with-shared-objects=&lt;SHARED-DIR&gt; --with-aterm-java=&lt;ATERM-DIR&gt;'<BR>
b. Type `make' to compile the package.<BR>
c. Type `make install' to install the package.
</OL>
<A NAME="toc3"></A><TABLE CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#007fff"><DIV ALIGN=center><TABLE>
<TR><TD><A NAME="htoc5"><B><FONT SIZE=5>1.3</FONT></B></A></TD>
<TD WIDTH="100%" ALIGN=center><B><FONT SIZE=5>Command line Arguments</FONT></B></TD>
</TR></TABLE></DIV></TD>
</TR></TABLE>
<TABLE CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#0000ff"><DIV ALIGN=center><TABLE>
<TR><TD><B><FONT SIZE=4>1.3.1</FONT></B></TD>
<TD WIDTH="100%" ALIGN=center><B><FONT SIZE=4>NAME</FONT></B></TD>
</TR></TABLE></DIV></TD>
</TR></TABLE>
 jtom - compile <FONT COLOR=navy>Tom</FONT> file (.t) into specified target languages<BR>
<BR>
<TABLE CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#0000ff"><DIV ALIGN=center><TABLE>
<TR><TD><B><FONT SIZE=4>1.3.2</FONT></B></TD>
<TD WIDTH="100%" ALIGN=center><B><FONT SIZE=4>SYNOPSIS</FONT></B></TD>
</TR></TABLE></DIV></TD>
</TR></TABLE>
 jtom [-hceVvioDCfWldpsO] [-I path] filename[.t]<BR>
<BR>
<TABLE CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#0000ff"><DIV ALIGN=center><TABLE>
<TR><TD><B><FONT SIZE=4>1.3.3</FONT></B></TD>
<TD WIDTH="100%" ALIGN=center><B><FONT SIZE=4>DESCRIPTION</FONT></B></TD>
</TR></TABLE></DIV></TD>
</TR></TABLE>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=1>
<TR><TD ALIGN=left NOWRAP>--help | -h</TD>
<TD ALIGN=left NOWRAP>Show the help</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--cCode | -c</TD>
<TD ALIGN=left NOWRAP>Generate C code (default is Java)</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--eCode | -e</TD>
<TD ALIGN=left NOWRAP>Generate Eiffel code (default is Java)</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--version | -V</TD>
<TD ALIGN=left NOWRAP>Print the version of TOM</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--verbose | -v</TD>
<TD ALIGN=left NOWRAP>Set verbose mode on: give duration information
on each compilation passes</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--intermediate | -i</TD>
<TD ALIGN=left NOWRAP>Generate intermediate files</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--noOutput | -o</TD>
<TD ALIGN=left NOWRAP>Do not generate code</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--noDeclaration | -D</TD>
<TD ALIGN=left NOWRAP>Do not generate code for declarations</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--doCompile | -C</TD>
<TD ALIGN=left NOWRAP>Start after type-checking (used after a
compilation process with --intermediate option</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--noCheck | -f</TD>
<TD ALIGN=left NOWRAP>Do not realize checking phases</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--noWarning | -W</TD>
<TD ALIGN=left NOWRAP>Do not print any warning</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--lazyType | -l</TD>
<TD ALIGN=left NOWRAP>Use universal type</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--demo | -d</TD>
<TD ALIGN=left NOWRAP>Run demo mode</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--import &lt;path&gt; | -I</TD>
<TD ALIGN=left NOWRAP>Path for %include construct to find included files</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--pretty | -p</TD>
<TD ALIGN=left NOWRAP>Generate readable code with indentation</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--atermStat | -s</TD>
<TD ALIGN=left NOWRAP>Print internal ATerm statistics</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--optimize | -O</TD>
<TD ALIGN=left NOWRAP>Optimized generated code</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--static</TD>
<TD ALIGN=left NOWRAP>Generate static functions</TD>
</TR>
<TR><TD ALIGN=left NOWRAP>--debug</TD>
<TD ALIGN=left NOWRAP>Generate debug primitives</TD>
</TR></TABLE><BR>
<A NAME="toc4"></A><TABLE CELLPADDING=0 CELLSPACING=0 WIDTH="100%">
<TR><TD BGCOLOR="#007fff"><DIV ALIGN=center><TABLE>
<TR><TD><A NAME="htoc6"><B><FONT SIZE=5>1.4</FONT></B></A></TD>
<TD WIDTH="100%" ALIGN=center><B><FONT SIZE=5>For developpers</FONT></B></TD>
</TR></TABLE></DIV></TD>
</TR></TABLE><A NAME="developpers"></A>

<H5>CVS repository</H5>
The latest developments of <FONT COLOR=navy>Tom</FONT> are available from anonymous cvs at:
<BR>
cvs -d :pserver:cvs@cvs-sop.inria.fr:/CVS/aircube checkout jtom

<H5><FONT COLOR=navy>Tom</FONT> Architecture</H5>
In <FONT COLOR=navy>Tom</FONT> directory architecture, 2 main branches can be underlined:
`stable` and `src`...
The `stable` branch contains the stable material to build a running
<FONT COLOR=navy>Tom</FONT> compiler. The `src` branch is used to make new developments.
Once in src directory, you can modify the sources. then, 
<OL type=1><LI>
Type `make' to build a new system and use jtom.src to use and
 test the new system.
<LI>At `src` directory level, type `make bootstrap' to bootstrap and
 install a new system.
 If something goes wrong, re-install the stable version:
 `cd ../../stable'; `make install'
 Then, correct the `src' directory
<LI>If you are happy from the result, type `make bootinstall' to
 make the current version become the stable one. WARNING: this action may be VERY DANGEROUS !!!
</OL>
Please send a mail to <A HREF="mailto:pierre-etienne.moreau@loria.fr">pierre-etienne.moreau@loria.fr</A> to propose your
suggestions.<BR>
<BR>

<H5>Additional tools for developments</H5>
To simplify <FONT COLOR=navy>Tom</FONT> development, an extra package called Apigen is used
to generate data structures used by <FONT COLOR=navy>Tom</FONT>. All generated files can be
found in `jtom \adt` directory.
<BR>
This package is available at
<A HREF="http://www.cwi.nl/htbin/sen1/twiki/bin/view/SEN1/PackageBase">CWI package base Page</A>.
WARNING: We will need to install JUnit to build this package.
Once TomSignature.adt is modified, `make api` to re-generate <FONT COLOR=navy>Tom</FONT>
data structures.<BR>
<BR>
<HR>
<A HREF="manual1001.html"><IMG SRC ="previous_motif.gif" ALT="Previous"></A>
<A HREF="manual.html"><IMG SRC ="contents_motif.gif" ALT="Up"></A>
<A HREF="system.html"><IMG SRC ="next_motif.gif" ALT="Next"></A>
</BODY>
</HTML>
