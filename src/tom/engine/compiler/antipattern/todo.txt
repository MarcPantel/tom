TODO

1. bug when multiple subjectss and only one pattern
2. allow disjonctions 
3. verify !x, !_ 
4. guards are not handled
5. in solver, see what rules can be eliminated