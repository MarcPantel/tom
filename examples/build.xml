<?xml version="1.0" encoding="UTF-8"?>
<project name="Ant for Tom-examples" default="distExamples" basedir=".">
	<description>
		This script prepare a bundle of Tom examples
	</description>
	
	<!-- some used directory location -->
	<property name="examplesDir" location="."/>
	<property name="distExamplesDir" location="dist"/>
	<property name="AddressBookDir" location="AddressBook"/>

	<target name="prepareExamples">
		<mkdir dir="${distExamplesDir}"/>
	</target>
	
	<!-- target debug to help finding properties problems -->
	<target name="debug"> 
		<echoproperties/>
	</target>

	<target name="distExamples" description="Prepare a
		distribution of examples" depends="prepareExamples">
		<copy todir="${distExamplesDir}">
			<fileset dir="${AddressBookDir}">
				<include name="*.t"/>
			</fileset>
		</copy>
	</target>

	<target name="cleanExamples" description="Cleans examples directory">
		<delete>
			<fileset dir="${examplesDir}" includes="**/*.class" />
		</delete>
		<!-- deletes java files generated by tom -->
		<delete>
			<fileset dir="${examplesDir}" includes="**/*.java">
				<present targetdir="${examplesDir}">
					<mapper type="glob" from="*.java" to="*.t"/>
				</present>
			</fileset>
		</delete>

	</target>

	<target name="cleanall" description="Cleans everything in the project" depends="cleanExamples">
	</target>	

	<target name="distclean" description="Mr proper" depends="cleanall">
		<delete dir="${distExamplesDir}"/>
		<delete dir="${AddressBookDir}"/>
	</target>

</project>
