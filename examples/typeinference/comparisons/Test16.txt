import test16.test16.types.*;
public class Test16 {
  %gom {
    module Test16
      abstract syntax
      B = b()
        | f(n:B)
        | g(n:B)
  }

  public static void main(String[] args) {
    B tt = `f(f(b()));
    %match{
      f(x) << tt -> { 
        System.out.println("l1 = " + `x);
        %match{
          f(y) << x -> { System.out.println("l2 = " + `y); }
        }
      }
    }

    %match{
      g(x) << tt -> { System.out.println("l3 = " + `x); }
    }
  }
}

------------------------------------------------
=> SORTIE NEWTYPER:
Code after type inference = 
Tom(concCode(TargetLanguageToCode(TL("import test16.test16.types.*;\npublic class Test16 {\n  ",TextPosition(1,1),TextPosition(3,3))),TomInclude(concCode(DeclarationToCode(TypeTermDecl(Name("B"),concDeclaration(EqualTermDecl(BQVariable(concOption(OriginTracking(Name("t1"),6,"/Users/claudia/Doctorat/tom/workspace/git-jtom/testsForNewTyper/test16/test16/Test16.tom")),Name("t1"),Type("B",TLType(" test16.test16.types.B "))),BQVariable(concOption(OriginTracking(Name("t2"),6,"/Users/claudia/Doctorat/tom/workspace/git-jtom/testsForNewTyper/test16/test16/Test16.tom")),Name("t2"),Type("B",TLType(" test16.test16.types.B "))),Code(" ({0}=={1}) "),OriginTracking(Name("equals"),6,"/Users/claudia/Doctorat/tom/workspace/git-jtom/testsForNewTyper/test16/test16/Test16.tom")),IsSortDecl(BQVariable(concOption(OriginTracking(Name("t"),4,"/Users/claudia/Doctorat/tom/workspace/git-jtom/testsForNewTyper/test16/test16/Test16.tom")),Name("t"),Type("B",TLType(" test16.test16.types.B "))),Code(" ({0} instanceof test16.test16.types.B) "),OriginTracking(Name("is_sort"),4,"/Users/claudia/Doctorat/tom/workspace/git-jtom/testsForNewTyper/test16/test16/Test16.tom"))),OriginTracking(Name("B"),2,"/Users/claudia/Doctorat/tom/workspace/git-jtom/testsForNewTyper/test16/test16/Test16.tom"))),DeclarationToCode(SymbolDecl(Name("b"))),DeclarationToCode(SymbolDecl(Name("f"))),DeclarationToCode(SymbolDecl(Name("g"))),TargetLanguageToCode(TL("\n\n",TextPosition(24,1),TextPosition(26,1))))),TargetLanguageToCode(TL("\n\n  public static void main(String[] args) {\n    B tt = ",TextPosition(9,4),TextPosition(12,12))),BQTermToCode(Composite(CompositeBQTerm(BuildTerm(Name("f"),concBQTerm(Composite(CompositeBQTerm(BuildTerm(Name("f"),concBQTerm(Composite(CompositeBQTerm(BuildTerm(Name("b"),concBQTerm(),"default")))),"default")))),"default")))),TargetLanguageToCode(TL(";\n    ",TextPosition(12,22),TextPosition(13,5))),InstructionToCode(Match(concConstraintInstruction(ConstraintInstruction(MatchConstraint(RecordAppl(concOption(OriginTracking(Name("f"),14,"Test16.t")),concTomName(Name("f")),concSlot(PairSlotAppl(Name("n"),Variable(concOption(OriginTracking(Name("x"),14,"Test16.t")),Name("x"),Type("B",TLType(" test16.test16.types.B ")),concConstraint()))),concConstraint()),BQVariable(concOption(OriginTracking(Name("tt"),14,"Test16.t")),Name("tt"),Type("B",TLType(" test16.test16.types.B ")))),RawAction(AbstractBlock(concInstruction(CodeToInstruction(TargetLanguageToCode(TL(" \n        System.out.println(\"l1 = \" + ",TextPosition(14,21),TextPosition(15,38)))),BQTermToInstruction(BQVariable(concOption(OriginTracking(Name("x"),15,"Test16.t"),ModuleName("default")),Name("x"),Type("B",TLType(" test16.test16.types.B ")))),CodeToInstruction(TargetLanguageToCode(TL(");\n        ",TextPosition(15,41),TextPosition(16,9)))),Match(concConstraintInstruction(ConstraintInstruction(MatchConstraint(RecordAppl(concOption(OriginTracking(Name("f"),17,"Test16.t")),concTomName(Name("f")),concSlot(PairSlotAppl(Name("n"),Variable(concOption(OriginTracking(Name("y"),17,"Test16.t")),Name("y"),Type("B",TLType(" test16.test16.types.B ")),concConstraint()))),concConstraint()),BQVariable(concOption(OriginTracking(Name("x"),17,"Test16.t")),Name("x"),Type("B",TLType(" test16.test16.types.B ")))),RawAction(AbstractBlock(concInstruction(CodeToInstruction(TargetLanguageToCode(TL(" System.out.println(\"l2 = \" + ",TextPosition(17,24),TextPosition(17,55)))),BQTermToInstruction(BQVariable(concOption(OriginTracking(Name("y"),17,"Test16.t"),ModuleName("default")),Name("y"),Type("B",TLType(" test16.test16.types.B ")))),CodeToInstruction(TargetLanguageToCode(TL("); ",TextPosition(17,58),TextPosition(17,60))))))),concOption(OriginTracking(Name("Pattern"),17,"Test16.t"),OriginalText(Name(""))))),concOption(OriginTracking(Name("Match"),16,"Test16.t"),ModuleName("default"))),CodeToInstruction(TargetLanguageToCode(TL("\n      ",TextPosition(18,9),TextPosition(19,7))))))),concOption(OriginTracking(Name("Pattern"),14,"Test16.t"),OriginalText(Name(""))))),concOption(OriginTracking(Name("Match"),13,"Test16.t"),ModuleName("default")))),InstructionToCode(Match(concConstraintInstruction(ConstraintInstruction(MatchConstraint(RecordAppl(concOption(OriginTracking(Name("g"),23,"Test16.t")),concTomName(Name("g")),concSlot(PairSlotAppl(Name("n"),Variable(concOption(OriginTracking(Name("x"),23,"Test16.t")),Name("x"),Type("B",TLType(" test16.test16.types.B ")),concConstraint()))),concConstraint()),BQVariable(concOption(OriginTracking(Name("tt"),23,"Test16.t")),Name("tt"),Type("B",TLType(" test16.test16.types.B ")))),RawAction(AbstractBlock(concInstruction(CodeToInstruction(TargetLanguageToCode(TL(" System.out.println(\"l3 = \" + ",TextPosition(23,21),TextPosition(23,52)))),BQTermToInstruction(BQVariable(concOption(OriginTracking(Name("x"),23,"Test16.t"),ModuleName("default")),Name("x"),Type("B",TLType(" test16.test16.types.B ")))),CodeToInstruction(TargetLanguageToCode(TL("); ",TextPosition(23,55),TextPosition(23,57))))))),concOption(OriginTracking(Name("Pattern"),23,"Test16.t"),OriginalText(Name(""))))),concOption(OriginTracking(Name("Match"),22,"Test16.t"),ModuleName("default")))),TargetLanguageToCode(TL("\n  }\n}\n",TextPosition(24,5),TextPosition(27,1)))))

------------------------------------------------
=> SORTIE OLDTYPER:

Code after type inference = 
Tom(concCode(TargetLanguageToCode(TL("import test16.test16.types.*;\npublic class Test16 {\n  ",TextPosition(1,1),TextPosition(3,3))),TomInclude(concCode(DeclarationToCode(TypeTermDecl(Name("B"),concDeclaration(EqualTermDecl(BQVariable(concOption(OriginTracking(Name("t1"),6,"/Users/claudia/Doctorat/tom/workspace/git-jtom/testsForNewTyper/test16/test16/Test16.tom")),Name("t1"),Type("B",TLType(" test16.test16.types.B "))),BQVariable(concOption(OriginTracking(Name("t2"),6,"/Users/claudia/Doctorat/tom/workspace/git-jtom/testsForNewTyper/test16/test16/Test16.tom")),Name("t2"),Type("B",TLType(" test16.test16.types.B "))),Code(" ({0}=={1}) "),OriginTracking(Name("equals"),6,"/Users/claudia/Doctorat/tom/workspace/git-jtom/testsForNewTyper/test16/test16/Test16.tom")),IsSortDecl(BQVariable(concOption(OriginTracking(Name("t"),4,"/Users/claudia/Doctorat/tom/workspace/git-jtom/testsForNewTyper/test16/test16/Test16.tom")),Name("t"),Type("B",TLType(" test16.test16.types.B "))),Code(" ({0} instanceof test16.test16.types.B) "),OriginTracking(Name("is_sort"),4,"/Users/claudia/Doctorat/tom/workspace/git-jtom/testsForNewTyper/test16/test16/Test16.tom"))),OriginTracking(Name("B"),2,"/Users/claudia/Doctorat/tom/workspace/git-jtom/testsForNewTyper/test16/test16/Test16.tom"))),DeclarationToCode(SymbolDecl(Name("b"))),DeclarationToCode(SymbolDecl(Name("f"))),DeclarationToCode(SymbolDecl(Name("g"))),TargetLanguageToCode(TL("\n\n",TextPosition(24,1),TextPosition(26,1))))),TargetLanguageToCode(TL("\n\n  public static void main(String[] args) {\n    B tt = ",TextPosition(9,4),TextPosition(12,12))),BQTermToCode(Composite(CompositeBQTerm(BuildTerm(Name("f"),concBQTerm(Composite(CompositeBQTerm(BuildTerm(Name("f"),concBQTerm(Composite(CompositeBQTerm(BuildTerm(Name("b"),concBQTerm(),"default")))),"default")))),"default")))),TargetLanguageToCode(TL(";\n    ",TextPosition(12,22),TextPosition(13,5))),InstructionToCode(Match(concConstraintInstruction(ConstraintInstruction(MatchConstraint(RecordAppl(concOption(OriginTracking(Name("f"),14,"Test16.t")),concTomName(Name("f")),concSlot(PairSlotAppl(Name("n"),Variable(concOption(OriginTracking(Name("x"),14,"Test16.t")),Name("x"),Type("B",TLType(" test16.test16.types.B ")),concConstraint()))),concConstraint()),BQVariable(concOption(OriginTracking(Name("tt"),14,"Test16.t")),Name("tt"),Type("B",TLType(" test16.test16.types.B ")))),RawAction(AbstractBlock(concInstruction(CodeToInstruction(TargetLanguageToCode(TL(" \n        System.out.println(\"l1 = \" + ",TextPosition(14,21),TextPosition(15,38)))),BQTermToInstruction(BQVariable(concOption(OriginTracking(Name("x"),15,"Test16.t"),ModuleName("default")),Name("x"),Type("B",TLType(" test16.test16.types.B ")))),CodeToInstruction(TargetLanguageToCode(TL(");\n        ",TextPosition(15,41),TextPosition(16,9)))),Match(concConstraintInstruction(ConstraintInstruction(MatchConstraint(RecordAppl(concOption(OriginTracking(Name("f"),17,"Test16.t")),concTomName(Name("f")),concSlot(PairSlotAppl(Name("n"),Variable(concOption(OriginTracking(Name("y"),17,"Test16.t")),Name("y"),Type("B",TLType(" test16.test16.types.B ")),concConstraint()))),concConstraint()),BQVariable(concOption(OriginTracking(Name("x"),17,"Test16.t")),Name("x"),Type("B",TLType(" test16.test16.types.B ")))),RawAction(AbstractBlock(concInstruction(CodeToInstruction(TargetLanguageToCode(TL(" System.out.println(\"l2 = \" + ",TextPosition(17,24),TextPosition(17,55)))),BQTermToInstruction(BQVariable(concOption(OriginTracking(Name("y"),17,"Test16.t"),ModuleName("default")),Name("y"),Type("B",TLType(" test16.test16.types.B ")))),CodeToInstruction(TargetLanguageToCode(TL("); ",TextPosition(17,58),TextPosition(17,60))))))),concOption(OriginTracking(Name("Pattern"),17,"Test16.t"),OriginalText(Name(""))))),concOption(OriginTracking(Name("Match"),16,"Test16.t"),ModuleName("default"))),CodeToInstruction(TargetLanguageToCode(TL("\n      ",TextPosition(18,9),TextPosition(19,7))))))),concOption(OriginTracking(Name("Pattern"),14,"Test16.t"),OriginalText(Name(""))))),concOption(OriginTracking(Name("Match"),13,"Test16.t"),ModuleName("default")))),InstructionToCode(Match(concConstraintInstruction(ConstraintInstruction(MatchConstraint(RecordAppl(concOption(OriginTracking(Name("g"),23,"Test16.t")),concTomName(Name("g")),concSlot(PairSlotAppl(Name("n"),Variable(concOption(OriginTracking(Name("x"),23,"Test16.t")),Name("x"),Type("B",TLType(" test16.test16.types.B ")),concConstraint()))),concConstraint()),BQVariable(concOption(OriginTracking(Name("tt"),23,"Test16.t")),Name("tt"),Type("B",TLType(" test16.test16.types.B ")))),RawAction(AbstractBlock(concInstruction(CodeToInstruction(TargetLanguageToCode(TL(" System.out.println(\"l3 = \" + ",TextPosition(23,21),TextPosition(23,52)))),BQTermToInstruction(BQVariable(concOption(OriginTracking(Name("x"),23,"Test16.t"),ModuleName("default")),Name("x"),Type("B",TLType(" test16.test16.types.B ")))),CodeToInstruction(TargetLanguageToCode(TL("); ",TextPosition(23,55),TextPosition(23,57))))))),concOption(OriginTracking(Name("Pattern"),23,"Test16.t"),OriginalText(Name(""))))),concOption(OriginTracking(Name("Match"),22,"Test16.t"),ModuleName("default")))),TargetLanguageToCode(TL("\n  }\n}\n",TextPosition(24,5),TextPosition(27,1)))))


