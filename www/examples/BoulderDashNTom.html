<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

  <head>
    <title>BoulderDash and Tom</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
    <link rel="stylesheet" type="text/css" media="screen,projection" title="Main Style" href="../styles/mainstyle.css" />
  </head>

  <body>
  <div id="page">
    <h1>BoulderDash and Tom using HashMap as topology</h1>
    
    To create a gravity system using Tom rewriting system leeds to these basic rules (exprimed in Tom + Java):<br/>
      <blockquote><div><code>
      public boolean gravity(HashMap newSpace, Bead b) {<br/>
      </code></div>
      <blockquote><div><code>
	%match(Bead b) {<br/>
	
	beadRock[s=empty()] -> {</code><br/></div>
	<blockquote><div><code>
	  Bead newBead = `bead(getSouthPosition(b.getPos()),b.getValue());<br/>
	  marked.add(b);<br/>
	  putBead(newSpace,newBead);<br/>
	  return true;<br/>
	  </code></div>
	</blockquote><div><code>
	}<br/>
	
	beadRock[s=s@beadRock[e=empty()],e=empty()] -> {
	</code></div><blockquote><div><code>
	  Bead newBead = `bead(getEastPosition(getSouthPosition(b.getPos())),b.getValue());<br/>
	  putBead(newSpace,newBead);<br/>
	  putBead(newSpace,s);<br/>
	  marked.add(b);<br/>
	  marked.add(s);<br/>
	  return true;<br/>
	</code></div></blockquote><div><code>
	}<br/>
	
	beadRock[s=s@beadRock[w=empty()],w=empty()] -> {<br/></code></div>
	<blockquote><div><code>
	  Bead newBead = `bead(getWestPosition(getSouthPosition(b.getPos())),b.getValue());<br/>
	  putBead(newSpace,newBead);<br/>
	  putBead(newSpace,s);<br/>
	  marked.add(b);<br/>
	  marked.add(s);<br/>
	  return true;<br/></code></div>
	</blockquote><div><code>
	}<br/>
	
	bead[pos=p] -> {<br/></code></div>
	<blockquote><div><code>
	  newSpace.put(p,b);<br/>
	  return false;<br/></code></div>
	</blockquote><div><code>
	}<br/>
      }<br/></code></div>
      </blockquote><div><code>
      return false;<br/>
      }<br/></code></div>
    </blockquote>
    <object classid="java:BoulderDash2D.class" codetype="application/java" archive="boulder.jar" width="400" height="440">
    <param name="fps" value="15"/></object>
    </div>
    <hr/>
    <div id="footer">
<!-- Created: Fri Jun 27 10:22:15 CEST 2003 -->
<!-- hhmts start -->
Last modified: Tue Aug 26 17:38:46 CEST 2003
<!-- hhmts end --><br/>
    Email : <a href="mailto:julien.guyon@loria.fr">Julien Guyon</a><br/>
  Valid <a href="http://validator.w3.org/check/referer" title="Check page validity">XHTML 1.1</a> and <a href="http://jigsaw.w3.org/css-validator/validator?uri=http://www.loria.fr/equipes/protheo/SOFTWARES/ELAN/tom/styles/mainstyle.css" title="Check CSS Style Validity">CSS2</a> Page.
    </div><!-- footer -->
  </body>
</html>
